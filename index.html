<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="assets/style.css" />

<head>
  <meta charset="UTF-8" />
  <title>The Satoshi Faucet - Free Satoshis</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description"
    content="The Satoshi Faucet - a nostalgic tribute faucet giving away a few satoshis to keep the legacy alive." />
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>

</head>

<body>
  <div class="page">
    <header>
      <!-- Tap graphic (replace tap.png with your actual file) -->
      <img src="tap.png" alt="Faucet" class="tap-image" />

      <div class="logo-area">
        <div class="faucet-icon" aria-hidden="true"></div>
        <div>
          <h1>The Satoshi Faucet</h1>
          <div class="subtitle">A tribute to the original Bitcoin Faucet – now dripping satoshis.</div>
        </div>
      </div>
    </header>

    <div class="layout">
      <!-- Left column / sidebar -->
      <aside class="sidebar">
        <h2>Balance</h2>
        <div class="sidebar-value" id="available-balance">▲ 75&nbsp;000 satoshis available</div>        
        <h2>Other Sites</h2>
        <ul>
          <li><a href="https://bitcointalk.org" target="_blank" rel="noopener noreferrer">bitcointalk.org</a></li>
          <li><a href="https://bitcoin.org" target="_blank" rel="noopener noreferrer">bitcoin.org</a></li>
          <li><a href="https://en.bitcoin.it/wiki/Main_Page" target="_blank" rel="noopener noreferrer">Bitcoin Wiki</a>
          </li>
        </ul>
      </aside>

      <!-- Main content -->
      <main>
        <div class="faucet-panel">
          <div class="faucet-panel-title">Get Satoshis from the Satoshi Faucet</div>
          <p class="faucet-panel-text">
            I’m giving away a few satoshis per visitor. Just complete the reCAPTCHA, enter your Lightning or Bitcoin
            receiving address, and press <strong>Get Some!</strong>
          </p>

          <form id="faucet-form" autocomplete="off">
            <div class="captcha-wrap">
              <div class="captcha-note">
                We offer free sats only to humans and aliens but not robots.<br>
                Please prove you're not an AI robot by completing the reCAPTCHA below.
              </div>
              <!-- Google reCAPTCHA -->
              <div class="g-recaptcha" data-sitekey="6LfFKSEsAAAAAKBqHR-UMEAQppJZ58vzoY4R_qb_"></div>
            </div>

            <div class="address-row">
              <label for="address-input">Your Satoshi Address:</label>
              <input id="address-input" name="address" type="text"
                placeholder="Lightning invoice (starting with lnbc...)" />
              <button type="submit" class="btn-primary" id="get-button">Get Some!</button>
            </div>
            <p style="font-size:0.85rem;margin-top:6px;">
              Need help? <a href="how-to-create-lightning-invoice-steps.html" target="_blank" rel="noopener">How to
                create a
                Lightning invoice</a>
            </p>

            <div class="status-message" id="status-message" aria-live="polite"></div>
          </form>

        </div>

        <!-- Informational sections -->
        <section>
          <h2>What are Satoshis?</h2>
          <p>
            Satoshis (or “sats”) are the smallest unit of bitcoin. One bitcoin equals 100&nbsp;000&nbsp;000 satoshis.
            Just like cents are to dollars, sats let you send tiny pieces of bitcoin around the world.
          </p>
          <p>
            Bitcoin itself is a new kind of money. It isn’t created or controlled by any single government or company.
            It runs on a peer-to-peer network secured by cryptography.
          </p>
        </section>

        <section>
          <h2>How do I get a receiving address?</h2>
          <p>
            Download a Bitcoin or Lightning wallet (for example from
            <a href="https://bitcoin.org/en/choose-your-wallet" target="_blank"
              rel="noopener noreferrer">bitcoin.org</a>).
            Your wallet will show you a receiving address or invoice you can paste here.
          </p>
        </section>

        <section>
          <h2>I’ve got sats – how can I help?</h2>
          <p>
            This faucet is just for fun and nostalgia. If you want to keep it flowing, you can donate a little bitcoin
            to its on-chain or Lightning address (to be listed here once the backend is live).
          </p>
        </section>

        <section>
          <h2>What’s the catch?</h2>
          <p>
            No catch – I just want to keep the spirit of the original Bitcoin Faucet alive and give newcomers a tiny
            taste of sats to start with.
          </p>
        </section>

        <footer>
          Still just a simple faucet on the internet. No guarantees, no promises. Use at your own risk.
          <br />
          <a href="faucet-status.php" style="font-size:0.85rem;">View faucet status &amp; recent activity</a>
        |   <a href="dear-hackers.html" style="font-size:0.8rem;">A friendly message to hackers</a>
        </footer>
      </main>
    </div>
  </div>

  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
  <script>
    (function () {
      const form = document.getElementById("faucet-form");
      const addressEl = document.getElementById("address-input");
      const statusEl = document.getElementById("status-message");
      const getBtn = document.getElementById("get-button");

      form.addEventListener("submit", function (e) {
        e.preventDefault();
        statusEl.textContent = "";
        statusEl.className = "status-message";

        const invoice = addressEl.value.trim();
        if (!invoice) {
          statusEl.textContent = "Please paste a Lightning invoice (BOLT11).";
          statusEl.classList.add("status-error");
          return;
        }

        let captchaResponse = "";
        if (window.grecaptcha) {
          captchaResponse = grecaptcha.getResponse();
        }
        if (!captchaResponse) {
          statusEl.textContent = "Please complete the reCAPTCHA before claiming.";
          statusEl.classList.add("status-error");
          return;
        }

        getBtn.disabled = true;

        const formData = new FormData();
        formData.append("address", invoice);
        formData.append("g-recaptcha-response", captchaResponse);

        fetch("claim.php", {
          method: "POST",
          body: formData
        })
          .then(r => r.json())
          .then(data => {
            if (data.status === "queued") {
              statusEl.textContent = data.message + " (Invoice: " + data.invoice + ")";
              statusEl.classList.add("status-success");
            } else if (data.status === "already_claimed") {
              statusEl.textContent = data.message + " (Invoice: " + data.invoice + ")";
              statusEl.classList.add("status-error");
            } else {
              statusEl.textContent = data.message || "Something went wrong. Please try again.";
              statusEl.textContent += " (Error: " + data.debug + ")";
              statusEl.classList.add("status-error");
            }
          })
          .catch(err => {
            console.error(err);
            statusEl.textContent = "Network error. Please try again.";
            statusEl.classList.add("status-error");
          })
          .finally(() => {
            getBtn.disabled = false;
            if (window.grecaptcha) {
              grecaptcha.reset();
            }
          });
      });
    })();
  </script>

</body>

</html>